# é¢˜ç›®[437. è·¯å¾„æ€»å’Œ III](https://leetcode.cn/problems/path-sum-iii/description/?envType=study-plan-v2&envId=top-100-liked)

ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œå’Œä¸€ä¸ªæ•´æ•° targetSum ï¼Œæ±‚è¯¥äºŒå‰æ ‘é‡ŒèŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äº targetSum çš„ è·¯å¾„ çš„æ•°ç›®ã€‚

è·¯å¾„ ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚

 

ç¤ºä¾‹ 1ï¼š

![1](https://assets.leetcode.com/uploads/2021/04/09/pathsum3-1-tree.jpg)


    è¾“å…¥ï¼šroot = [10,5,-3,3,2,null,11,3,-2,null,1], targetSum = 8
    è¾“å‡ºï¼š3
    è§£é‡Šï¼šå’Œç­‰äº 8 çš„è·¯å¾„æœ‰ 3 æ¡ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚


ç¤ºä¾‹ 2ï¼š

    è¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22
    è¾“å‡ºï¼š3


æç¤º:

    äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯ [0,1000]
    -109 <= Node.val <= 109 
    -1000 <= targetSum <= 1000 

*****

# è§£é¢˜æ€è·¯

å’Œæœ¬é¢˜ç›¸å…³çš„

[112. è·¯å¾„æ€»å’Œ](https://leetcode.cn/problems/path-sum/description/)

[113. è·¯å¾„æ€»å’Œ II](https://leetcode.cn/problems/path-sum-ii/description/)

å»ºè®®å…ˆåšå®Œè¿™2é¢˜å†æ¥åšè¿™ä¸€é¢˜ğŸ˜Š

æœ¬é¢˜åœ¨113çš„åŸºç¡€ä¸Šï¼Œæ”¾å¼€äº†é™åˆ¶ï¼Œä¸éœ€è¦ä»rootå¼€å§‹ï¼Œä¸éœ€è¦åˆ°å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯ç”±äºvalçš„å€¼å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œ

æ‰€ä»¥ä¸ç®¡æ˜¯ä¸æ˜¯rootå¼€å§‹ï¼Œéƒ½è¦éå†åˆ°å¶å­èŠ‚ç‚¹æ‰çŸ¥é“æœ€ç»ˆçš„ç­”æ¡ˆ

## è§£æ³•1 å›æº¯:

è¿™é¢˜ä¸ç”¨çŒœï¼Œè‚¯å®šä¹Ÿæ˜¯å›æº¯ï¼Œè‚¯å®šä¹Ÿæ˜¯ä»rootå¼€å§‹ï¼Œçªç„¶æœ‰ä¸ªæƒ³æ³•ï¼Œç”±äºä»–çš„targetSumä¸è¦æ±‚ä»rootå¼€å§‹

æ‰€ä»¥å¯¹åº”æ¯ä¸ªNodeæ¥è¯´ï¼Œä¸€ç§æ˜¯è¦è®¡ç®—ä»parentä¼ é€’ä¸‹æ¥çš„targetSumï¼Œè¿˜æœ‰ä¸€ç§æ˜¯è‡ªå·±ä½œä¸ºâ€œrootâ€ä¼ é€’ç»™å­Nodeæ˜¯é‚£ä¸ªåŸå§‹çš„targetSumã€‚

è¿™æ ·æƒ³åˆ°ä¸‹é¢ï¼Œç¬¬ä¸€å±‚rootåªè¦åˆ¤æ–­æ˜¯å¦ç­‰äºtargetSumï¼Œç¬¬äºŒå±‚å°±è¦åˆ¤æ–­rootç»™çš„æ–°targetSumå’Œè‡ªå·±æ˜¯å¦ç­‰äºtargetSum

ç¬¬ä¸‰å±‚å°±è¦åˆ¤æ–­ä»parenté‚£è¾¹æ›´æ–°åçš„rootç»™çš„targetSumï¼Œä»¥åŠç¬¬äºŒå±‚ä¼ ä¸‹æ¥çš„targetSumï¼Œè¿˜è¦åˆ¤æ–­è‡ªå·±æ˜¯å¦ç­‰äºè¿™ä¸ªï¼Œä¸€å…±3ä¸ª

ç¬¬å››å±‚å°±è¦åˆ¤æ–­4ä¸ªï¼Œç¬¬äº”å±‚å°±è¦åˆ¤æ–­5ä¸ªï¼Œç¬¬å…­å±‚å°±è¦6ä¸ªï¼Œä¾æ¬¡ç±»æ¨ã€‚

### golangä»£ç 1

é‚£å°±ä¸æ˜¯ä¸€ä¸ªtargetSumï¼Œè€Œæ˜¯ä¸€ä¸ªtargetSumListï¼Œæ¯å¾€ä¸‹ä¸€å±‚å°±æŠŠä¸€ä¸ªæ–°çš„targetSumåŠ å…¥è¿™ä¸ªListï¼Œ

ç„¶ååœ¨backtracké‡Œé¢åˆ¤æ–­ï¼Œå¾ªç¯è¿™ä¸ªlistï¼Œå‡å»å½“å‰rootçš„Valï¼Œé‚£è¯´æ˜å°±æ‰¾åˆ°ä¸€æ¡ä¸º0çš„è·¯äº†ï¼Œå°±å¯ä»¥æŠŠå½“å‰çš„è·¯åŠ å…¥ç»“æœ

ä½†æ˜¯ç°åœ¨é‡åˆ°ä¸ªé—®é¢˜äº†ï¼Œå…·ä½“çš„è·¯å¾„æ€ä¹ˆè®°å½•å‘¢ï¼Ÿï¼ˆè¿™é‡Œå…¶å®åˆæ²¡çœ‹é¢˜äº†ï¼Œé¢˜ç›®æ˜æ˜è¯´åªè¦çŸ¥é“ç¬¦åˆæ¡ä»¶çš„è·¯å¾„æœ‰å‡ ä¸ªå°±è¡Œï¼‰

ä¸ç®¡äº†ï¼Œå…ˆæŠŠæ¡†æ¶å†™å‡ºæ¥

```go
func pathSum(root *TreeNode, targetSum int) int {
    // å¦‚æœæ˜¯é€’å½’å‡½æ•°ï¼Œä¸€å®šè¦å…ˆå£°æ˜ï¼Œå› ä¸ºgoçš„:= å…ˆè®¡ç®—å³è¾¹è¡¨è¾¾å¼ â†’ å†å£°æ˜å·¦è¾¹å˜é‡
    var backtrack func(root *TreeNode, targetSumList *[]int) 
    result := make([][]int, 0)
    
    backtrack = func(root *TreeNode, targetSumList *[]int) {
        if root == nil{
            return
        }
        for i := range *targetSumList{
            (*targetSumList)[i] -= root.Val
            // è¯´æ˜æ‰¾åˆ°äº†ä¸º0çš„è·¯å¾„äº†
            if (*targetSumList)[i] == 0 {
                // æŠŠç»“æœåŠ å…¥result
                fmt.Println("æ‰¾åˆ°ä¸º0çš„")
            }
        }
        // è¿™é‡Œæ‰“å°ä¸€ä¸‹targetåˆ—è¡¨ï¼Œæ–¹ä¾¿ç ”ç©¶ä¸€ä¸‹é€’å½’çš„æƒ…å†µ
        fmt.Println(targetSumList)
        *targetSumList = append(*targetSumList, targetSum)
        for _, each := range([]*TreeNode{root.Left, root.Right}){
            if each == nil {
                continue
            }
            backtrack(each, targetSumList)
        }
        // è¿™é‡Œçš„è¿˜åŸï¼Œä¸æ­¢è¦æŠŠè¯¥å±‚çº§æ·»åŠ çš„targetå»äº†ï¼Œ
        *targetSumList = (*targetSumList)[:len(*targetSumList)-1]
        // è¿˜è¦æŠŠä¸Šé¢æ¯ä¸ª-=root.valä¹Ÿå¾—è¿˜åŸäº†
        // ç¬¬ä¸€æ¬¡æ²¡åŠ ä¸Šï¼Œä¸Šé¢print targetåˆ—è¡¨çš„æ—¶å€™ï¼Œå¾€ä¸‹èµ°çš„æ—¶å€™æ­£å¸¸ï¼Œä¸€å›æº¯å°±å‘ç°æ•°å€¼ä¸å¯¹
        // ç„¶åæ‰å‘ç°ä¸Šé¢æ¯ä¸ªéƒ½å»ºäº†rootçš„Valäº†ï¼ï¼ï¼
        for i := range *targetSumList{
            (*targetSumList)[i] += root.Val
        }
    }
    targetSumList := []int{targetSum}
    backtrack(root, &targetSumList)
    return len(result)
}
```

è¿è¡Œä¸€ä¸‹ï¼Œæµ‹è¯•ç”¨ä¾‹case1ï¼Œåº”è¯¥æ˜¯è¦æ‰“å°å‡º3æ¬¡â€œæ‰¾åˆ°ä¸º0çš„â€ï¼Œ ç›´æ¥åœ¨é¡µé¢ä¸Šé¢è¿è¡Œï¼Œæœ‰å¦‚ä¸‹è¾“å‡ºï¼š

æ ‡å‡†è¾“å‡º

    &[-2]
    &[-7 3]
    æ‰¾åˆ°ä¸º0çš„
    &[-10 0 5]
    &[-13 -3 2 5]
    &[-8 2 7 10]
    &[-9 1 6]
    æ‰¾åˆ°ä¸º0çš„
    &[-10 0 5 7]
    &[1 11]
    æ‰¾åˆ°ä¸º0çš„
    &[-10 0 -3]

çœ‹åˆ°ä¸Šé¢è¾“å‡ºï¼Œé‚£ç¡®å®æ˜¯æ­£ç¡®çš„ï¼Œä½†æ˜¯è·¯å¾„å…·ä½“æ€ä¹ˆå­˜å‚¨è¿˜ä¸çŸ¥é“ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™æˆ‘å‘ç°ï¼Œé¢˜ç›®ä¹Ÿæ²¡è¦æ±‚è¾“å‡ºå…·ä½“è·¯å¾„ï¼Œåªè¦æ‰¾åˆ°æ¬¡æ•°å°±è¡Œ

æˆ‘é ï¼Œé‚£ä¸å°±æ˜¯æˆ‘ä¸Šé¢çš„printä¸º0çš„æ—¶å€™ï¼Œè¿™ä¸èµ·é£äº†ï¼Œä¿®æ”¹ä¸€ä¸‹ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```go
/**
 * Definition for a binary tree node.
 * type TreeNode struct {
 *     Val int
 *     Left *TreeNode
 *     Right *TreeNode
 * }
 */
func pathSum(root *TreeNode, targetSum int) int {
    // å¦‚æœæ˜¯é€’å½’å‡½æ•°ï¼Œä¸€å®šè¦å…ˆå£°æ˜ï¼Œå› ä¸ºgoçš„:= å…ˆè®¡ç®—å³è¾¹è¡¨è¾¾å¼ â†’ å†å£°æ˜å·¦è¾¹å˜é‡
    var backtrack func(root *TreeNode, targetSumList *[]int) 
    // åªéœ€è¦è®°å½•æ¬¡æ•°
    result := 0
    
    backtrack = func(root *TreeNode, targetSumList *[]int) {
        if root == nil{
            return
        }
        for i := range *targetSumList{
            (*targetSumList)[i] -= root.Val
            // è¯´æ˜æ‰¾åˆ°äº†ä¸º0çš„è·¯å¾„äº†,result+1
            if (*targetSumList)[i] == 0 {
                result += 1
            }
        }
        *targetSumList = append(*targetSumList, targetSum)
        for _, each := range([]*TreeNode{root.Left, root.Right}){
            if each == nil {
                continue
            }
            backtrack(each, targetSumList)
        }
        *targetSumList = (*targetSumList)[:len(*targetSumList)-1]
        for i := range *targetSumList{
            (*targetSumList)[i] += root.Val
        }
    }
    targetSumList := []int{targetSum}
    backtrack(root, &targetSumList)
    return result
}
```

è¿‡äº†[doge]

è¿è¡Œç»“æœ
```
æ‰§è¡Œç”¨æ—¶åˆ†å¸ƒ
4ms å‡»è´¥47.14%

æ¶ˆè€—å†…å­˜åˆ†å¸ƒ
6.14MB å‡»è´¥69.63%
```

é‚£æ„Ÿè§‰åº”è¯¥è¿˜æœ‰ä¸ªè¦æ±‚è¾“å‡ºå…·ä½“ç»“æœçš„ï¼Œæœç„¶è¿˜æœ‰ä¸ª[666. è·¯å¾„æ€»å’Œ IV](https://leetcode.cn/problems/path-sum-iv/description/)

å¯æƒœè¦leetcodeä¼šå‘˜æ‰èƒ½åšï¼ˆé‚£ä¸å¥½æ„æ€äº†ï¼Œæš‚æ—¶ä½“éªŒä¸åˆ°äº†ï¼‰

### pythonä»£ç 1

ç…§å¸¸ç¿»è¯‘ä¸ºæˆ‘ä»¬å¤§python

```python
# Definition for a binary tree node.
# class TreeNode:
#     def __init__(self, val=0, left=None, right=None):
#         self.val = val
#         self.left = left
#         self.right = right
class Solution:
    def pathSum(self, root: Optional[TreeNode], targetSum: int) -> int:
        result = 0
        def backtrack(root, target_sum_list):
            nonlocal result
            if not root: return
            for i in range(len(target_sum_list)):
                target_sum_list[i] -= root.val
                if target_sum_list[i] == 0:
                    result += 1
            target_sum_list.append(targetSum)
            for each in [root.left, root.right]:
                if not each: continue
                backtrack(each, target_sum_list)
            # ä¸èƒ½è¿™æ ·å†™ target_sum_list = target_sum_list[:-1]
            # è¿™æ ·å†™æ˜¯å£°æ˜äº†ä¸€ä¸ªæœ¬åœ°å˜é‡è¦†ç›–äº†ä¹‹å‰çš„list
            # æ—§ list â† çˆ¶é€’å½’å’Œå…„å¼Ÿé€’å½’è¿˜åœ¨ç”¨
            # æ–° list â† å½“å‰å‡½æ•°è‡ªå·±åœ¨ç”¨
            target_sum_list.pop()
            for i in range(len(target_sum_list)):
                target_sum_list[i] += root.val
        backtrack(root, [targetSum])
        return result
```

è¿è¡Œç»“æœ
```
æ‰§è¡Œç”¨æ—¶åˆ†å¸ƒ
247ms å‡»è´¥23.46%

æ¶ˆè€—å†…å­˜åˆ†å¸ƒ
17.88MB å‡»è´¥86.71%
```


æ¬¢è¿æ¥githubä¸Šçœ‹æ›´å¤šé¢˜ç›®çš„è§£ç­”[åŠ›æ‰£è§£é¢˜æ€è·¯](https://github.com/WRAllen/LeetCode)
