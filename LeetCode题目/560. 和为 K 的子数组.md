# é¢˜ç›®[560. å’Œä¸º K çš„å­æ•°ç»„](https://leetcode.cn/problems/subarray-sum-equals-k/description/?envType=study-plan-v2&envId=top-100-liked)

ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å› è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„å­æ•°ç»„çš„ä¸ªæ•° ã€‚

å­æ•°ç»„æ˜¯æ•°ç»„ä¸­å…ƒç´ çš„è¿ç»­éç©ºåºåˆ—ã€‚

 

ç¤ºä¾‹ 1ï¼š

    è¾“å…¥ï¼šnums = [1,1,1], k = 2
    è¾“å‡ºï¼š2

ç¤ºä¾‹ 2ï¼š

    è¾“å…¥ï¼šnums = [1,2,3], k = 3
    è¾“å‡ºï¼š2
 

æç¤ºï¼š

    1 <= nums.length <= 2 * 104
    -1000 <= nums[i] <= 1000
    -107 <= k <= 107

*****

# è§£é¢˜æ€è·¯

çœ‹èµ·æ¥ä¹Ÿæ˜¯ä¸€ä¸ªæ»‘åŠ¨çª—å£çš„é¢˜ç›®ï¼Œåªä¸è¿‡è¿™ä¸ªçª—å£çš„é•¿åº¦çš„å¯å˜é•¿çš„

## è§£æ³•1 æ»‘åŠ¨çª—å£:

æŒ‰ç…§é¢˜ç›®çš„æ„æ€ï¼Œå¯ä»¥ç”¨ä¸¤ä¸ªä¸‹æ ‡å¾ªç¯numsæ•°ç»„ï¼Œç¬¬ä¸€ä¸ªä¸‹æ ‡ä»0å¼€å§‹åˆ°ç»“æŸï¼Œç¬¬äºŒä¸ªä¸‹æ ‡ä»ä¸Šä¸€ä¸ªä¸‹æ ‡+1å¼€å§‹

ç”±äºæµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°æœ‰ä¸€äº›ç‰¹æ®Šçš„caseå¦‚ä¸‹
```
1, -1, 0 k=0
0, 0  k=0
```
æ‰€ä»¥ä¸éå†å®Œæ•´ä¸ªåˆ—è¡¨æ˜¯æ²¡æ³•çŸ¥é“ç»“æœçš„ï¼Œå› ä¸ºä¹‹å‰æ²¡è€ƒè™‘åˆ°è´Ÿæ•°çš„æƒ…å†µæ‰€ä»¥è¿˜æ‰“ç®—å‰ªæåˆ æ‰ä¸€éƒ¨åˆ†ä¾¿åˆ©é€»è¾‘

ä½†æ˜¯æµ‹è¯•æ²¡é€šè¿‡ï¼Œæ‰å‘ç°è¿˜æœ‰è´Ÿæ•°å’Œ0çš„æƒ…å†µ

### golangä»£ç 1

ä¸‹é¢å…¶å®å°±æ˜¯æš´åŠ›ç ´è§£ï¼Œæ¯ä¸ªå­—æ®µéå†2éï¼Œè¿›è¡Œæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„ç»“æœ

```go
func subarraySum(nums []int, k int) int {
    result := 0
    tmpSumNums := make([]int, 0)
    for i := range nums{
        num := nums[i]
        if len(tmpSumNums) > 0 {
            lastNum := tmpSumNums[len(tmpSumNums)-1]
            if lastNum + k == 0 {
                tmpSumNums = append(tmpSumNums, 0)    
            } else {
                tmpSumNums = append(tmpSumNums, lastNum)
            }
        }else {
            tmpSumNums = append(tmpSumNums, num)
        }
        if tmpSumNums[len(tmpSumNums)-1] == k {
            result += 1
        }
    }
    return result
}

```

è¿è¡Œç»“æœ
```
æ‰§è¡Œç”¨æ—¶åˆ†å¸ƒ
1461ms å‡»è´¥5.02%

æ¶ˆè€—å†…å­˜åˆ†å¸ƒ
8.05MB å‡»è´¥95.84%
```

è¿™é‡Œpythonçš„æš´åŠ›ç ´è§£è¿‡ä¸äº†ï¼Œä¸å†™äº†

## è§£æ³•2 å‰åºå’Œ:

### golangä»£ç 1

çœ‹åˆ°è¿™ä¸ªè¿è¡Œæ—¶é—´å°±çŸ¥é“è‚¯å®šæœ‰ä¸ç”¨éå†2æ¬¡çš„æ–¹æ³•

å¦‚æœæœ‰å°‘éå†çš„è¯ï¼Œé‚£ä¸€å®šè¦å¤šå­˜å‚¨ï¼ˆç©ºé—´æ¢æ—¶é—´ï¼Œæ—¶é—´æ¢ç©ºé—´ï¼Œèƒ½é‡å®ˆæ’ğŸ¤ªï¼‰

è¿™é‡Œæœ‰ç‚¹ç±»ä¼¼åŠ¨æ€è§„åˆ’æ€è·¯ï¼Œè¦æƒ³åªéå†ä¸€éï¼Œé‚£è‚¯å®šè¦æœ‰ä¸ªå­˜å‚¨ä»‹è´¨æ¥å­˜å‚¨ä¿¡æ¯ï¼Œä¸‹é¢çš„è§£æ³•ä¸ªäººæ„Ÿè§‰ç¬¬ä¸€æ¬¡åšè¿™ç§ç±»å‹çš„å¾ˆéš¾æƒ³åˆ°

å‡å¦‚ä½ æœ‰ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œé¢æ¯ä¸ªå€¼éƒ½æ˜¯å½“å‰numsçš„æœ€å¤§å’Œ

æ¯”å¦‚:[1, 1, 1]
é‚£è¿™ä¸ªåŠ¨æ€æ•°ç»„arrayå°±æ˜¯ï¼š[1, 2, 3]
                       i     j
å¦‚æœ`array[j]-array[i]`ç­‰äºkï¼Œæ˜¯ä¸æ˜¯è¯´æ˜i+1åˆ°jé‡Œé¢çš„å€¼ç›¸åŠ æ­£å¥½ç­‰äºkï¼Œ

åˆ©ç”¨æ•°å­¦ç§»åŠ¨ç­‰ä»·çš„åŸç†ï¼š`array[j]-k`ç­‰äºarray[i]ï¼Œç„¶åå½“å‰array[j]å…¶å®å°±æ˜¯å½“å‰çš„æœ€å¤§å€¼ï¼Œarray[i]æ˜¯ä¹‹å‰çš„å€¼

æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªmapæ¥å­˜å‚¨ä¿¡æ¯ï¼ŒæŠŠæ£€ç´¢ä»O(n)å˜æˆO(1)ï¼Œè¿™ä¸ªmapç”¨æ¥å­˜å‚¨å½“å‰æœ€å¤§å€¼åœ¨å‡ºç°çš„æ¬¡æ•°

å…·ä½“çœ‹å¦‚ä¸‹ä»£ç 

```go
func subarraySum(nums []int, k int) int {
    result := 0
	// åŠ¨æ€æœ€å¤§å€¼ï¼Œå…¶å®æ˜¯ä¸ªlistï¼Œä½†æ˜¯åªç”¨æœ€åä¸€ä½ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªintå°±è¡Œ
    PreMaxNum := 0
	// keyä¸ºå½“å‰åŠ¨æ€æœ€å¤§å€¼PreMaxNumï¼Œvaluesä¸ºåœ¨mapé‡Œé¢å‡ºç°çš„æ¬¡æ•°
	infoMap := map[int]int{}
    for i := range nums{
		// mapé‡Œé¢è®°å½•ä¸€ä¸‹å½“å‰åŠ¨æ€æœ€å¤§å€¼PreMaxNumå¯¹åº”çš„æ¬¡æ•°ï¼ˆè¿™é‡Œç”±äºæœ‰è´Ÿæ•°ï¼Œæ‰€ä»¥æœ€å¤§å€¼å¯èƒ½æ˜¯0 åˆ°æŸä¸ªå€¼ å†åˆ° 0ï¼Œæ‰€ä»¥ç”¨+=1ï¼‰
		// è¿™é‡Œè¿™ä¸ªé¡ºåºè¦å†ä¸‹é¢mapçš„åˆ¤æ–­å‰ï¼Œä¸ç„¶å°±éœ€è¦å¤šä¸€è¡Œçš„åˆå§‹åŒ–infoMap[0] = 1
		infoMap[PreMaxNum] += 1
		// æ›´æ–°å½“å‰æœ€å¤§å€¼
		PreMaxNum += nums[i]
		// ä¸‹é¢è¿™é‡Œæ˜¯å…³é”®é€»è¾‘ï¼Œå¦‚æœå½“å‰åŠ¨æ€æœ€å¤§å€¼PreMaxNum-kå­˜åœ¨äºmapï¼Œï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢çš„array[j]-kï¼‰è¯´æ˜ä¹‹å‰è‡³å°‘å­˜åœ¨è¿‡ä¸€ä¸ªä¸‹æ ‡j
		// ä½¿å¾—å½“å‰çš„å€¼å‡å»jåæ ‡çš„å€¼ç­‰äºkï¼Œæ‰€ä»¥result+=mapå¯¹åº”valuseçš„å€¼
		if _, ok := infoMap[PreMaxNum-k]; ok {
			result += infoMap[PreMaxNum-k]
		}
		
    }
    return result
}
```

è¿è¡Œç»“æœ
```
æ‰§è¡Œç”¨æ—¶åˆ†å¸ƒ
15ms å‡»è´¥60.52%

æ¶ˆè€—å†…å­˜åˆ†å¸ƒ
9.02MB å‡»è´¥65.91%
```

### pythonä»£ç 1

æŠŠgoç¿»è¯‘æˆpythonï¼Œç”¨ä¸€ä¸ªé»˜è®¤å€¼çš„dictï¼šdefaultdict
å¦‚æœkeyä¸å­˜åœ¨defaultdictä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªvalueä¸ºé»˜è®¤å€¼çš„

```python
from collections import defaultdict

class Solution:
    def subarraySum(self, nums: List[int], k: int) -> int:
        result, pre_max_num = 0, 0
        # from collections import defaultdict
        info_map = defaultdict(int)
        for num in nums:
            info_map[pre_max_num] += 1
            pre_max_num += num
            if pre_max_num-k in info_map:
                result += info_map[pre_max_num-k]
                
        return result

```

è¿è¡Œç»“æœ
```
æ‰§è¡Œç”¨æ—¶åˆ†å¸ƒ
39ms å‡»è´¥79.18%

æ¶ˆè€—å†…å­˜åˆ†å¸ƒ
20.17MB å‡»è´¥57.42%
```


æ¬¢è¿æ¥githubä¸Šçœ‹æ›´å¤šé¢˜ç›®çš„è§£ç­”[åŠ›æ‰£è§£é¢˜æ€è·¯](https://github.com/WRAllen/LeetCode)
